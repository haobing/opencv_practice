 #include<iostream>
#include<opencv2/opencv.hpp>
using namespace cv; 
using namespace std;
int main()
{
        Mat img_rgb,img_gry,img_canny;
        img_rgb = imread("../picture/tree.jpg");

        img_gry.create(img_rgb.rows,img_rgb.cols,CV_8UC);
        img_gry.setTo(Scalar(255));
        for(int i=0;i<img_rgb.cols;i++)
        {
                for(int j=0;j<img_rgb.rows;j++)
                {
                        Vec3b rgb = img_rgb.at<Vec3b>(j,i);
                        img_gry.at<unsigned char>(j,i)[0] =0.299*rgb[0]+0.587*rgb[1]+0.114*rgb[2];
                        //img_gry.at<Vec3b>(j,i)[1] = rgb[1]/2;
                        //img_gry.at<Vec3b>(j,i)[2] = rgb[2]*2;
                }
        }
        cout<<(unsigned int)img_rgb.at<Vec3b>(3,3)[0]<<" "<<(unsigned int)img_rgb.at<Vec3b>(3,3)[1]<<" "<<(unsigned int)img_rgb.at<Vec3b>(3,3)[2]<<endl;
        namedWindow("img_gry",1);
        imshow("img_rgb",img_rgb);
        imshow("img_gry",img_gry);
        cvtColor(img_rgb,img_canny,COLOR_BGR2GRAY);
        imshow("img_canny",img_canny);
        cout<<(unsigned int)img_canny.at<unsigned char>(3,3)<<endl;
        waitKey(0);
}
